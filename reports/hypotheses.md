# Product & Technical Hypotheses

## Продуктовые гипотезы
1. **Флаг “high-risk vendor” корректно ранжирует риск.**  
   - Метрика: uplift TPR при фиксированном FPR по подгруппе high-risk vs low-risk.  
   - Проверка: ROC/AUC по подгруппам, PSI/KS стабильность.


2. **Ночные окна (локальное время пользователя) содержат повышенный риск.**  
   - Метрика: Fraud Rate by Hour (локализация по стране/таймзоне).  
   - Проверка: сезонность, доверительные интервалы, множественные сравнения.


3. **Аномальное количество уникальных продавцов за последний час коррелирует с фродом.**  
   - Метрика: IV/WOE, SHAP важность фичи `unique_merchants_last_hour`.  
   - Проверка: бининг по квантилям, lift по декаилям.


4. **Мультивалютные сценарии (конвертация) чаще фродовые.**  
   - Метрика: Fraud Rate среди операций, где валюты клиента и транзакции различаются.  
   - Проверка: регрессия с контролем по стране/типу карты/каналу.

5. **Определённые `vendor_type` (например, digital goods, gift cards) несут больший риск.**  
   - Метрика: Top-N по Fraud Rate, скорректированный на объём (Empirical Bayes).  
   - Проверка: частотные эффекты + бета-апостериорные интервалы.

6. **Связка “новое устройство + высокие суммы” увеличивает вероятность фрода.**  
   - Метрика: FR при `device_age < X дней` и `amount > q90`.  
   - Проверка: взаимодействия признаков в модели, парные сравнения.

7. **Аномальная география (IP/гео ≠ выдающая страна карты/история клиента) → рост риска.**  
   - Метрика: FR при несовпадении геопризнаков.  
   - Проверка: карта правил + логистическая регрессия со взаимодействиями.

8. **Повторяющиеся неуспешные попытки перед успешной транзакцией — предиктор фрода.**  
   - Метрика: FR по count_failed_last_24h.  
   - Проверка: сравнение декаилей по признаку.

9. **Сегменты клиентов с нестабильным поведенческим профилем (высокая дисперсия по времени/типам трат) более рисковые.**  
   - Метрика: FR по кластерным сегментам.  
   - Проверка: k-means/DBSCAN на поведенческих фичах.

10. **Повышение точности скоринга сократит ложные отклонения и даст экономический эффект.**  
    - Метрика: ΔApprovalRate при фиксированном FraudLoss.  
    - Проверка: offline policy simulation (cost-sensitive).

## Технические гипотезы
1. **Фича‑инжениринг с учётом времени (rolling windows 1h/24h/7d) улучшит AUC/PR‑AUC.**  
   - Метрики: AUC, PR-AUC, KS; калибровка (ECE).  
   - Валидация: time‑based split, backtesting.

2. **Градиентный бустинг с категориальными фичами (CatBoost/LightGBM) > простые деревья/логрег.**  
   - Метрики: AUC/PR-AUC, latency.  
   - Валидация: кросс‑валидация по временным блокам.

3. **Ансамбль (GBM + simple NN на последовательностях клиента) даёт стабильный выигрыш.**  
   - Метрики: AUC, стабильность PSI < 0.1 по месяцам.  
   - Валидация: blending/stacking, temporal OOT.

4. **Онлайн‑фичестор (feature store) снижает задержки и дрейф признаков.**  
   - Метрика: p99 latency, процент пропущенных/просроченных фич.  
   - Валидация: нагрузочные тесты, синтетические задержки.

5. **Внедрение explainability (SHAP) ускорит согласования правил риск‑офиса.**  
   - Метрики: TTD (time‑to‑decision), % rule overrides.  
   - Валидация: пилот на части трафика.

6. **Сигнатуры устройств/браузеров (device fingerprint) уменьшают фрод, сохраняя UX.**  
   - Метрики: FraudLoss, ConversionRate, latency.  
   - Валидация: A/B с фичей vs без.

7. **Аномалия‑детекторы (IsolationForest/LOF) как алерты поверх скоринга повышают TPR при малом FPR.**  
   - Метрики: TPR@FPR=1%, alert precision.  
   - Валидация: пороги по квантилям, ручной разбор топ-алертов.

## Экономический эффект (пример формулы)
```
ExpectedGain = Saved_Fraud_Loss  +  ΔApproval * AvgMargin  −  Cost(Model+Infra)
```

