# Fraud EDA & Hypotheses

**Цель**: Разведочный анализ данных по транзакциям и формулирование продуктовых и технических гипотез для повышения качества антифрод‑системы и бизнес‑ценности.

## Как запускать локально

```bash
# 1) Python 3.10+
python -m venv .venv
source .venv/bin/activate  # Windows: .venv\Scripts\activate

# 2) Зависимости
pip install -r requirements.txt

# 3) Положите файлы данных
#   data/transaction_fraud_data.parquet
#   data/historical_currency_exchange.parquet

# 4) Запустите разведку
python src/eda.py
```

Скрипт сохраняет графики в папку `figures/` и краткий отчёт в `reports/eda_summary.md`.

## Краткий репорт

По итогам EDA были найдены следущие инсайты

1) Группировка по стране, расчет доли мошенничества, построение bar chart.
→ Помогает выявить географические аномалии 
   ![график fraud-rate-by-country](.\figures\fraud_rate_by_country.png)

   найдено топ 5 стран с наибольшими показателями мошеничества:
    - Russia: 299425
    - Mexico: 298841
    - Brazil: 298629
    - Nigeria: 298600
    - Australia: 37652


2) Распределение сумм транзакций:
Гистограмма по нормализованной сумме (USD).
→ Позволяет увидеть, в каких диапазонах чаще встречается мошенничество

   ![график amount_usd_hist](.\figures\amount_usd_hist.png)


3) Fraud rate по часам суток:
Группировка по часу, line plot.
→ Анализ временных паттернов, выявление "опасных" часов

   ![график fraud_rate_by_hour](.\figures\fraud_rate_by_hour.png)




4) Fraud rate для high-risk vendors:
Bar chart по флагу риска.
→ Проверка гипотезы о связи риска продавца и мошенничества

   ![график fraud_rate_high_risk_flag](.\figures\fraud_rate_high_risk_flag.png)


5) Fraud rate по типу продавца:
Bar chart по топ-12 категориям.
→ Анализирует, какие типы продавцов чаще вовлечены в мошенничество.

   ![график fraud_rate_by_vendor_type_top12](.\figures\fraud_rate_by_vendor_type_top12.png)

## Генерация отчета

Формируется markdown-отчет(`reports\eda_summary.md`) с основными метриками, топ-5 стран по числу мошеннических транзакций, анализом уникальных продавцов за последний час для клиентов (поведенческий паттерн).


## Как принимались решения и чем руководствовались
### Принципы EDA для антифрода
- Проверка качества данных:
    Удаление пропусков, приведение времени к единому формату, нормализация валют — стандартные best practices для EDA в задачах фрода

- Визуализация для поиска паттернов:
    Использование графиков для выявления аномалий и закономерностей — ключевой этап в поиске продуктовых и технических гипотез 

- Анализ по ключевым осям:
    География, время, тип продавца, риск — эти факторы часто оказывают влияние на вероятность мошенничества 
    
 

- Формирование гипотез:
    На основе выявленных паттернов формулируются гипотезы, например:
    - "В определенных странах fraud rate выше — возможно, стоит ужесточить правила для этих регионов."
    - "В ночные часы fraud rate выше — стоит усилить проверки ночью."
    - "High-risk vendors чаще вовлечены в мошенничество — стоит пересмотреть критерии high-risk."
    - "Некоторые типы продавцов чаще используются для мошенничества — возможно, стоит добавить дополнительные проверки для этих категорий" 
    

### Использование метрик и KPI
Fraud rate, распределение по странам, по времени, по типу продавца — это стандартные метрики для оценки эффективности антифрод-системы 
 

Анализ уникальных продавцов за последний час — попытка выявить аномальное поведение клиентов (например, резкое увеличение числа уникальных продавцов может быть признаком мошенничества) 

### Технические решения
Использование pandas, numpy, matplotlib — стандарт для EDA в Python 
 
 
Нормализация валют — обязательна для корректного сравнения транзакций из разных стран 
 

Автоматизация отчетности (markdown-отчет(`reports\eda_summary.md`) ) — для прозрачности и удобства передачи результатов бизнесу и разработчикам.